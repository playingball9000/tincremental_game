(()=>{"use strict";var e={155:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIRM_BUTTON_ID=t.TRAVEL_BUTTON_NAME=t.CELL_SIZE=void 0,t.CELL_SIZE=25,t.TRAVEL_BUTTON_NAME="travel-button",t.CONFIRM_BUTTON_ID="confirmButtonId"},292:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.screenDrawer=t.ScreenDrawer=void 0;var o=n(155),r=function(){function e(){var e=document.getElementById("gameCanvas");this.ctx=e.getContext("2d")}return e.prototype.drawPlayer=function(e){console.log("Drawing player at position (".concat(e.x,", ").concat(e.y,")"));var t=e.x*o.CELL_SIZE,n=e.y*o.CELL_SIZE;console.log("draw play",t,n,o.CELL_SIZE/2,o.CELL_SIZE),this.ctx.fillStyle="brown",this.ctx.fillRect(t,n,o.CELL_SIZE/2,o.CELL_SIZE),this.ctx.stroke()},e.prototype.drawMap=function(e){console.log("Drawing map with data",e);for(var t=e,n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)this.ctx.fillStyle=t[n][r].walkable?"white":"black",this.ctx.fillRect(r*o.CELL_SIZE,n*o.CELL_SIZE,o.CELL_SIZE,o.CELL_SIZE),this.ctx.strokeRect(r*o.CELL_SIZE,n*o.CELL_SIZE,o.CELL_SIZE,o.CELL_SIZE)},e.prototype.drawPath=function(e){if(e){this.ctx.fillStyle="green";for(var t=0,n=e;t<n.length;t++){var r=n[t];this.ctx.fillRect(r.coordinates.x*o.CELL_SIZE,r.coordinates.y*o.CELL_SIZE,o.CELL_SIZE,o.CELL_SIZE)}}},e}();t.ScreenDrawer=r,t.screenDrawer=new r},756:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameEngine=void 0;var o=n(533),r=n(536),a=n(292),i=n(154),c=n(490),s=function(){function e(){this.player=new r.Player,this.mapManager=new o.MapManager,this.score=0,this.clickValue=2,this.autoIncrementValue=0}return e.prototype.click=function(){console.log("click1"),this.score+=this.clickValue,this.updateScoreDisplay()},e.prototype.click2=function(){console.log("click2"),this.score+=this.clickValue,this.autoIncrementValue+=1},e.prototype.autoIncrement=function(){console.log("autoIncrement"),this.score+=this.autoIncrementValue,this.updateScoreDisplay()},e.prototype.updateScoreDisplay=function(){var e=document.getElementById("score");e&&(e.innerText="Score: ".concat(this.score))},e.prototype.init=function(){var e=this;console.log("initialize game"),new a.ScreenDrawer;var t=new i.Home(1,"Home","Your Home",{x:0,y:0},[]),n=new i.City(2,"Town","Small town",{x:2,y:3},[]),o=new i.City(3,"City","Bustling city",{x:4,y:4},[]);this.mapManager.locations=[t,n,o],(0,c.generateTravelButtonsDiv)(this.mapManager.locations,"column1");var r=localStorage.getItem("goldMinerSave");if(r){var s=JSON.parse(r);this.score=s.score,this.updateScoreDisplay()}var l=document.getElementById("clickButton"),d=document.getElementById("clickButton2");l&&l.addEventListener("click",(function(){return e.click()})),d&&d.addEventListener("click",(function(){return e.click2()})),document.getElementById("player-inventory").textContent="x/".concat(this.player.inventorySpace),this.mapManager.initializeMap(),this.mapManager.startTravel({x:4,y:4},this.player)},e}();t.GameEngine=s},533:function(e,t,n){var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.MapManager=void 0,t.selectTravelOption=function(e){console.log("selectOption"),d(),u();var t=document.querySelectorAll("."+r.TRAVEL_BUTTON_NAME),n=Array.from(t).find((function(t){return t.textContent===e}));n.classList.add("selected");var o=document.createElement("div");o.className="confirm-button",o.id=r.CONFIRM_BUTTON_ID,o.textContent="Confirm",o.onclick=function(){return function(e){console.log("travelling to: ",e),document.getElementById("selected-travel-button").textContent="Selected option: "+e,d(),u()}(e)},n.insertAdjacentElement("afterend",o),document.getElementById("selected-travel-button").textContent="Selected option: "+e};var r=n(155),a=n(407),i=n(292),c=n(706),s=n(490),l=function(){function e(){this.locations=[],this.grid=[],this.pathCounter=0}return e.prototype.initializeMap=function(){this.grid=[[new a.MapNode(0,0,!0),new a.MapNode(1,0,!0),new a.MapNode(2,0,!0),new a.MapNode(3,0,!0),new a.MapNode(4,0,!0)],[new a.MapNode(0,1,!0),new a.MapNode(1,1,!1),new a.MapNode(2,1,!1),new a.MapNode(3,1,!1),new a.MapNode(4,1,!0)],[new a.MapNode(0,2,!0),new a.MapNode(1,2,!0),new a.MapNode(2,2,!0),new a.MapNode(3,2,!1),new a.MapNode(4,2,!0)],[new a.MapNode(0,3,!0),new a.MapNode(1,3,!1),new a.MapNode(2,3,!0),new a.MapNode(3,3,!0),new a.MapNode(4,3,!0)],[new a.MapNode(0,4,!0),new a.MapNode(1,4,!0),new a.MapNode(2,4,!0),new a.MapNode(3,4,!0),new a.MapNode(4,4,!0)]],i.screenDrawer.drawMap(this.grid)},e.prototype.startTravel=function(e,t){var n,r=this;this.pathCounter=0;var a=null===(n=(0,c.aStar)(this.getMapNode(t.location.x,t.location.y),this.getMapNode(e.x,e.y),this.grid))||void 0===n?void 0:n.map((function(e){return o({},e)}));console.log(a),a&&(this.travelIntervalId=setInterval((function(){return r.calculateTravelDistance(a,t)}),1e3))},e.prototype.calculateTravelDistance=function(e,t){for(var n=t.speed;n>0&&this.pathCounter<e.length;)(n-=e[this.pathCounter].terrain.units)<0?e[this.pathCounter].terrain.units=Math.abs(n):n>=0&&this.pathCounter<e.length-1&&this.pathCounter++;t.location={x:e[this.pathCounter].coordinates.x,y:e[this.pathCounter].coordinates.y},console.log(t.location),i.screenDrawer.drawMap(this.grid),i.screenDrawer.drawPath(e),i.screenDrawer.drawPlayer(t.location),(0,s.sendMessageToLog)("You travelled: ".concat(t.speed)),this.pathCounter+1===e.length&&void 0!==this.travelIntervalId&&(clearInterval(this.travelIntervalId),this.travelIntervalId=void 0,i.screenDrawer.drawMap(this.grid),i.screenDrawer.drawPlayer(t.location),(0,s.sendMessageToLog)("You have arrived!"))},e.prototype.getMapNode=function(e,t){if(e<0||e>=this.grid[0].length||t<0||t>=this.grid.length)throw new Error("Coordinates out of bounds");return this.grid[t][e]},e}();function d(){document.querySelectorAll("."+r.TRAVEL_BUTTON_NAME).forEach((function(e){e.classList.remove("selected")}))}function u(){var e=document.getElementById(r.CONFIRM_BUTTON_ID);e&&e.remove()}t.MapManager=l},706:(e,t)=>{function n(e,t){for(var n=[],o=0,r=[[0,-1],[1,0],[0,1],[-1,0]];o<r.length;o++){var a=r[o],i=a[0],c=a[1],s=e.coordinates.x+i,l=e.coordinates.y+c;s>=0&&s<t[0].length&&l>=0&&l<t.length&&t[l][s].walkable&&n.push(t[l][s])}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.aStar=function(e,t,o){var r=[],a=new Set;for(r.push(e);r.length>0;){for(var i=0,c=1;c<r.length;c++)r[c].f<r[i].f&&(i=c);var s=r[i];if(s.coordinates.x===t.coordinates.x&&s.coordinates.y===t.coordinates.y){for(var l=[],d=s;d;)l.push(d),d=d.parent;return l.reverse()}r.splice(i,1),a.add("".concat(s.coordinates.x,",").concat(s.coordinates.y));for(var u=function(e){if(a.has("".concat(e.coordinates.x,",").concat(e.coordinates.y)))return"continue";var n,o,i=s.g+1,c=!1;r.some((function(t){return t.coordinates.x===e.coordinates.x&&t.coordinates.y===e.coordinates.y}))?i<e.g&&(c=!0):(c=!0,e.h=(n=e,o=t,Math.abs(n.coordinates.x-o.coordinates.x)+Math.abs(n.coordinates.y-o.coordinates.y)),r.push(e)),c&&(e.parent=s,e.g=i,e.f=e.g+e.h)},p=0,h=n(s,o);p<h.length;p++)u(h[p])}return null}},133:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addTravelButtonsListeners=function(){document.querySelectorAll("."+o.TRAVEL_BUTTON_NAME).forEach((function(e){e.addEventListener("click",(function(){(0,r.selectTravelOption)(e.textContent)}))}))};var o=n(155),r=n(533)},490:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendMessageToLog=function(e){var t=document.createElement("div");t.textContent=e,r.insertBefore(t,r.firstChild)},t.generateTravelButtonsDiv=function(e,t){var n=document.getElementById(t);if(n){var r=document.createElement("div");r.classList.add("game-container");var a=document.createElement("p");a.textContent="Choose an option:",r.appendChild(a);var i=document.createElement("div");i.classList.add("travel-buttons"),e.forEach((function(e){var t=document.createElement("div");t.classList.add("travel-button-container");var n=document.createElement("div");n.classList.add(o.TRAVEL_BUTTON_NAME),n.id="travel".concat(e.name.replace(/\s+/g,"")),n.textContent=e.name,t.appendChild(n),i.appendChild(t)})),r.appendChild(i);var c=document.createElement("p");c.id="selected-travel-button",c.textContent="Selected option: None",r.appendChild(c),n.insertBefore(r,n.firstChild)}else console.error("Container with ID ".concat(t," not found"))};var o=n(155),r=document.getElementById("log-container")},154:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Home=t.City=void 0;t.City=function(e,t,n,o,r){this.id=e,this.name=t,this.description=n,this.coordinates=o,this.npcs=r};t.Home=function(e,t,n,o,r){this.id=e,this.name=t,this.description=n,this.coordinates=o,this.npcs=r}},407:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MapNode=void 0;var o=n(356);t.MapNode=function(e,t,n,r,a,i,c){void 0===r&&(r=0),void 0===a&&(a=0),void 0===i&&(i=null),this.coordinates={x:e,y:t},this.walkable=n,this.g=r,this.h=a,this.f=r+a,this.parent=i,this.terrain=null!=c?c:new o.Terrain("Grass",90)}},536:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;t.Player=function(){this.inventorySpace=10,this.speed=50,this.location={x:0,y:0}}},356:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Terrain=void 0;t.Terrain=function(e,t){this.name=e,this.units=t}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0});var t=n(756),r=n(133),a=new t.GameEngine;document.addEventListener("DOMContentLoaded",(function(){a.init(),(0,r.addTravelButtonsListeners)()}))})();var r=exports;for(var a in o)r[a]=o[a];o.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();